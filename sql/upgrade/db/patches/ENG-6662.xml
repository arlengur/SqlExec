<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="ENG-6662-01" author="mdaly">
        <comment>Populate the Gene table for all current CS3 HorizonDisease</comment>
        <sql>
            INSERT INTO `prodlims`.`horizongene`
            (`chromosome`, `symbol`)
            VALUES
            ('2', 'ABCB11'),
            ('11', 'ABCC8'),
            ('X', 'ABCD1'),
            ('3', 'ACAD9'),
            ('1', 'ACADM'),
            ('17', 'ACADVL'),
            ('11', 'ACAT1'),
            ('17', 'ACOX1'),
            ('16', 'ACSF3'),
            ('20', 'ADA'),
            ('5', 'ADAMTS2'),
            ('4', 'AGA'),
            ('1', 'AGL'),
            ('2', 'AGPS'),
            ('2', 'AGXT'),
            ('21', 'AIRE'),
            ('17', 'ALDH3A2'),
            ('9', 'ALDOB'),
            ('1', 'ALG6'),
            ('2', 'ALMS1'),
            ('1', 'ALPL'),
            ('3', 'AMT'),
            ('12', 'AQP2'),
            ('22', 'ARSA'),
            ('5', 'ARSB'),
            ('7', 'ASL'),
            ('7', 'ASNS'),
            ('17', 'ASPA'),
            ('9', 'ASS1'),
            ('11', 'ATM'),
            ('2', 'ATP6V1B1'),
            ('X', 'ATP7A'),
            ('13', 'ATP7B'),
            ('X', 'ATRX'),
            ('11', 'BBS1'),
            ('12', 'BBS10'),
            ('4', 'BBS12'),
            ('16', 'BBS2'),
            ('19', 'BCKDHA'),
            ('6', 'BCKDHB'),
            ('2', 'BCS1L'),
            ('15', 'BLM'),
            ('1', 'BSND'),
            ('3', 'BTD'),
            ('15', 'CAPN3'),
            ('21', 'CBS'),
            ('10', 'CDH23'),
            ('12', 'CEP290'),
            ('2', 'CERKL'),
            ('7', 'CFTR'),
            ('X', 'CHM'),
            ('17', 'CHRNE'),
            ('16', 'CIITA'),
            ('16', 'CLN3'),
            ('13', 'CLN5'),
            ('15', 'CLN6'),
            ('8', 'CLN8'),
            ('3', 'CLRN1'),
            ('8', 'CNGB3'),
            ('2', 'COL4A3'),
            ('2', 'COL4A4'),
            ('X', 'COL4A5'),
            ('3', 'COL7A1'),
            ('2', 'CPS1'),
            ('11', 'CPT1A'),
            ('1', 'CPT2'),
            ('1', 'CRB1'),
            ('17', 'CTNS'),
            ('1', 'CTSK'),
            ('16', 'CYBA'),
            ('X', 'CYBB'),
            ('8', 'CYP11B2'),
            ('10', 'CYP17A1'),
            ('15', 'CYP19A1'),
            ('2', 'CYP27A1'),
            ('10', 'DCLRE1C'),
            ('11', 'DHCR7'),
            ('1', 'DHDDS'),
            ('7', 'DLD'),
            ('X', 'DMD'),
            ('5', 'DNAH5'),
            ('9', 'DNAI1'),
            ('17', 'DNAI2'),
            ('2', 'DYSF'),
            ('X', 'EDA'),
            ('3', 'EIF2B5'),
            ('X', 'EMD'),
            ('8', 'ESCO2'),
            ('15', 'ETFA'),
            ('4', 'ETFDH'),
            ('19', 'ETHE1'),
            ('4', 'EVC'),
            ('6', 'EYS'),
            ('4', 'F11'),
            ('X', 'F9'),
            ('15', 'FAH'),
            ('2', 'FAM161A'),
            ('16', 'FANCA'),
            ('9', 'FANCC'),
            ('9', 'FANCG'),
            ('1', 'FH'),
            ('19', 'FKRP'),
            ('9', 'FKTN'),
            ('X', 'FMR1'),
            ('17', 'G6PC'),
            ('17', 'GAA'),
            ('14', 'GALC'),
            ('17', 'GALK1'),
            ('9', 'GALT'),
            ('19', 'GAMT'),
            ('1', 'GBA'),
            ('3', 'GBE1'),
            ('19', 'GCDH'),
            ('3', 'GFM1'),
            ('X', 'GJB1'),
            ('13', 'GJB2'),
            ('X', 'GLA'),
            ('3', 'GLB1'),
            ('9', 'GLDC'),
            ('9', 'GLE1'),
            ('9', 'GNE'),
            ('12', 'GNPTAB'),
            ('16', 'GNPTG'),
            ('12', 'GNS'),
            ('16', 'GPR56'),
            ('9', 'GRHPR'),
            ('2', 'HADHA'),
            ('1', 'HAX1'),
            ('16', 'HBA1'),
            ('16', 'HBA2'),
            ('11', 'HBB'),
            ('15', 'HEXA'),
            ('5', 'HEXB'),
            ('1', 'HFE2'),
            ('8', 'HGSNAT'),
            ('21', 'HLCS'),
            ('1', 'HMGCL'),
            ('10', 'HOGA1'),
            ('10', 'HPS1'),
            ('3', 'HPS3'),
            ('5', 'HSD17B4'),
            ('1', 'HSD3B2'),
            ('3', 'HYAL1'),
            ('11', 'HYLS1'),
            ('X', 'IDS'),
            ('4', 'IDUA'),
            ('9', 'IKBKAP'),
            ('X', 'IL2RG'),
            ('15', 'IVD'),
            ('11', 'KCNJ11'),
            ('6', 'LCA5'),
            ('19', 'LDLR'),
            ('1', 'LDLRAP1'),
            ('9', 'LHX3'),
            ('5', 'LIFR'),
            ('10', 'LIPA'),
            ('18', 'LOXHD1'),
            ('8', 'LPL'),
            ('2', 'LRPPRC'),
            ('19', 'MAN2B1'),
            ('3', 'MCCC1'),
            ('5', 'MCCC2'),
            ('19', 'MCOLN1'),
            ('11', 'MED17'),
            ('16', 'MEFV'),
            ('15', 'MESP2'),
            ('4', 'MFSD8'),
            ('17', 'MKS1'),
            ('22', 'MLC1'),
            ('4', 'MMAA'),
            ('12', 'MMAB'),
            ('1', 'MMACHC'),
            ('2', 'MMADHC'),
            ('15', 'MPI'),
            ('1', 'MPL'),
            ('2', 'MPV17'),
            ('1', 'MTHFR'),
            ('X', 'MTM1'),
            ('5', 'MTRR'),
            ('4', 'MTTP'),
            ('6', 'MUT'),
            ('11', 'MYO7A'),
            ('17', 'NAGLU'),
            ('17', 'NAGS'),
            ('8', 'NBN'),
            ('8', 'NDRG1'),
            ('20', 'NDUFAF5'),
            ('5', 'NDUFS6'),
            ('2', 'NEB'),
            ('18', 'NPC1'),
            ('14', 'NPC2'),
            ('19', 'NPHS1'),
            ('1', 'NPHS2'),
            ('15', 'NR2E3'),
            ('1', 'NTRK1'),
            ('10', 'OAT'),
            ('19', 'OPA3'),
            ('X', 'OTC'),
            ('12', 'PAH'),
            ('13', 'PCCA'),
            ('3', 'PCCB'),
            ('10', 'PCDH15'),
            ('X', 'PDHA1'),
            ('3', 'PDHB'),
            ('7', 'PEX1'),
            ('1', 'PEX10'),
            ('8', 'PEX2'),
            ('6', 'PEX6'),
            ('6', 'PEX7'),
            ('12', 'PFKM'),
            ('1', 'PHGDH'),
            ('6', 'PKHD1'),
            ('16', 'PMM2'),
            ('1', 'POMGNT1'),
            ('1', 'PPT1'),
            ('5', 'PROP1'),
            ('10', 'PSAP'),
            ('11', 'PTS'),
            ('12', 'PUS1'),
            ('11', 'PYGM'),
            ('6', 'RAB23'),
            ('11', 'RAG2'),
            ('11', 'RAPSN'),
            ('6', 'RARS2'),
            ('14', 'RDH12'),
            ('9', 'RMRP'),
            ('1', 'RPE65'),
            ('16', 'RPGRIP1L'),
            ('X', 'RS1'),
            ('20', 'RTEL1'),
            ('13', 'SACS'),
            ('20', 'SAMHD1'),
            ('4', 'SEPSECS'),
            ('17', 'SGCA'),
            ('4', 'SGCB'),
            ('13', 'SGCG'),
            ('17', 'SGSH'),
            ('16', 'SLC12A3'),
            ('15', 'SLC12A6'),
            ('6', 'SLC17A5'),
            ('5', 'SLC22A5'),
            ('7', 'SLC25A13'),
            ('13', 'SLC25A15'),
            ('5', 'SLC26A2'),
            ('7', 'SLC26A4'),
            ('1', 'SLC35A3'),
            ('11', 'SLC37A4'),
            ('8', 'SLC39A4'),
            ('20', 'SLC4A11'),
            ('X', 'SLC6A8'),
            ('14', 'SLC7A7'),
            ('2', 'SMARCAL1'),
            ('5', 'SMN1'),
            ('11', 'SMPD1'),
            ('8', 'STAR'),
            ('3', 'SUMF1'),
            ('11', 'TCIRG1'),
            ('14', 'TECPR2'),
            ('7', 'TFR2'),
            ('14', 'TGM1'),
            ('11', 'TH'),
            ('11', 'TMEM216'),
            ('11', 'TPP1'),
            ('22', 'TRMU'),
            ('12', 'TSFM'),
            ('8', 'TTPA'),
            ('22', 'TYMP'),
            ('11', 'USH1C'),
            ('1', 'USH2A'),
            ('9', 'VPS13A'),
            ('8', 'VPS13B'),
            ('1', 'VPS45'),
            ('14', 'VRK1'),
            ('14', 'VSX2'),
            ('2', 'WNT10A');

            SET SQL_SAFE_UPDATES=0;

            -- By convention, the cloudId for most CS3 diseases is the gene symbol...
            UPDATE `prodlims`.`horizongene` g JOIN `prodlims`.`horizondisease` d
            SET g.`disease_id` = d.`id` WHERE g.`symbol` = d.`cloudId`;

            -- ...except for Alpha-Thalassemia and HBA1 and HBA2
            UPDATE `prodlims`.`horizongene` g
            SET g.`disease_id` = (SELECT `id` FROM `prodlims`.`horizondisease` d WHERE d.`cloudId` = 'ATHAL')
            WHERE g.`symbol` IN ('HBA1', 'HBA2');

            SET SQL_SAFE_UPDATES=1;
        </sql>
        <!-- Rollback: Table will be dropped if Horizon rolled back. -->
        <rollback/>
    </changeSet>

    <changeSet id="ENG-6662-02" author="mdaly">
        <comment>Workflows (HZN-CLOUD-COMMON-SPEC-01002): Remove HT from Workflows; Associate Workflow.TSE with Tay-Sachs enzyme-only HorizonDisease.</comment>
        <sql>
            SET SQL_SAFE_UPDATES=0;
            DELETE FROM `prodlims`.`horizondiseases_workflows` WHERE `workflows` = 'HT';
            SET SQL_SAFE_UPDATES=1;

            INSERT INTO `prodlims`.`horizondiseases_workflows` (`horizondisease_id`, `workflows`) SELECT `id`, 'TSE' FROM `prodlims`.`horizondisease` WHERE `cloudID` = 'TSE';
        </sql>
        <!-- Rollback: Table will be dropped if Horizon rolled back. -->
        <rollback/>
    </changeSet>

</databaseChangeLog>